---
/**
 * Update Password Page
 * Route: /auth/update-password
 * Purpose: US-004 - Set new password after reset
 */

import AuthLayout from "@/layouts/AuthLayout.astro";
import UpdatePasswordForm from "@/components/auth/UpdatePasswordForm";

// Disable prerendering for authentication pages
export const prerender = false;

// Get recovery token from query string
const token = Astro.url.searchParams.get("token") || "";

// If no token provided, redirect to reset password page
if (!token) {
  return Astro.redirect("/auth/reset-password");
}

// TODO: When authentication is implemented, verify token validity
// and redirect if token is invalid or expired
---

<AuthLayout title="Set New Password" description="Enter your new password below">
  <UpdatePasswordForm token={token} client:load />
</AuthLayout>
